@{
    ViewData["Title"] = "Home";
}

<!-- Hero Section -->
<section class="hero-section" id="heroSection" style="background-image: none;">
    <!-- Animated Background Layers -->
    <!-- Dark overlay layer (DEFI style) - makes background visible but slightly darkened -->
    <div class="hero-dark-overlay" id="heroDarkOverlay"></div>
    <div class="hero-mesh-gradient" id="heroMeshGradient"></div>
    <div class="hero-gradient-overlay" id="heroGradientOverlay"></div>
    <div class="hero-grid-overlay" id="heroGridOverlay"></div>
    
    <!-- Light Streaks - 2 Components at 2 sides (DEFI style) -->
    <div class="hero-light-streaks" id="heroLightStreaks">
        <div class="light-streak light-streak-left"></div>
        <div class="light-streak light-streak-right"></div>
    </div>
    
    <!-- Particle Effects - Flying Up Animations -->
    <div class="hero-particles" id="heroParticles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    
    <!-- Decorative floating circles -->
    <div class="decorative-circle"></div>
    <div class="decorative-circle"></div>
    <div class="decorative-circle"></div>
    
    <div class="container">
        <div class="hero-content text-center text-white animate-fade-in-up">
            <h1 class="hero-title">
                <i class="fas fa-graduation-cap me-3"></i>
                Welcome to Scientific Conference Management System
            </h1>
            <p class="hero-subtitle">
                A professional platform for managing, submitting, and evaluating scientific research works.
                Connect researchers and facilitate excellent academic collaboration.
            </p>
            <!-- Dashboard Buttons -->
            <div class="mt-4 d-flex justify-content-center gap-3 flex-wrap">
                @if (User.Identity?.IsAuthenticated == true)
                {
                    <!-- Author Dashboard Button -->
                    <a href="@Url.Action("GoToAuthorDashboard", "Home")" class="btn btn-primary btn-lg shadow-lg" id="authorDashboardBtn">
                        <i class="fas fa-user-edit me-2"></i>Author Dashboard
                    </a>
                    
                    <!-- Reviewer Dashboard Button -->
                    <a href="@Url.Action("GoToReviewerDashboard", "Home")" class="btn btn-success btn-lg shadow-lg" id="reviewerDashboardBtn">
                        <i class="fas fa-user-check me-2"></i>Reviewer Dashboard
                    </a>
                    
                    <!-- Admin Dashboard Button (Hidden by default, shown only for admin) -->
                    @if (User.IsInRole("Admin"))
                    {
                        <a href="/Admin/Dashboard" class="btn btn-danger btn-lg shadow-lg" id="adminDashboardBtn">
                            <i class="fas fa-tachometer-alt me-2"></i>Admin Dashboard
                        </a>
                    }
                }
                else
                {
                    <!-- Guest Buttons - Show when not logged in -->
                    <a href="@Url.Action("Login", "Account")" class="btn btn-primary btn-lg shadow-lg" id="submitPaperBtn">
                        <i class="fas fa-file-upload me-2"></i>Submit Now
                    </a>
                    <a href="@Url.Action("Register", "Account")" class="btn btn-outline-light btn-lg shadow-lg" id="registerBtn">
                        <i class="fas fa-user-plus me-2"></i>Register to Participate
                    </a>
                }
            </div>
            <!-- Countdown Timer -->
            <div class="countdown-container mb-4">
                <h5 class="text-white mb-3">
                    <i class="fas fa-clock me-2"></i>Time Remaining Until Conference
                </h5>
                <div class="countdown-timer">
                    <div class="countdown-item">
                        <div class="countdown-value" id="countdownDays">0</div>
                        <div class="countdown-label">Days</div>
                    </div>
                    <div class="countdown-separator">:</div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="countdownHours">0</div>
                        <div class="countdown-label">Hours</div>
                    </div>
                    <div class="countdown-separator">:</div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="countdownMinutes">0</div>
                        <div class="countdown-label">Minutes</div>
                    </div>
                    <div class="countdown-separator">:</div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="countdownSeconds">0</div>
                        <div class="countdown-label">Seconds</div>
                    </div>
                </div>
                <p class="text-white-50 mt-3 mb-0">
                    <i class="fas fa-calendar-alt me-2"></i>Conference Date: <strong id="conferenceDate">Loading...</strong>
                </p>
            </div>

            <div class="hero-info justify-content-center">
                <div class="hero-info-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <div>
                        <div class="fw-bold" id="conferenceLocation">Loading...</div>
                        <small class="opacity-75">Location</small>
                    </div>
                </div>
                <div class="hero-info-item">
                    <i class="fas fa-users"></i>
                    <div>
                        <div class="fw-bold">Academic</div>
                        <small class="opacity-75">Community</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Conference Overview Section -->
<section class="section position-relative bg-light" id="conferenceOverviewSection">
    <div class="container position-relative" style="z-index: 1;">
        <div class="section-title text-center mb-5">
            <h2 id="conferenceOverviewTitle" class="display-5 fw-bold mb-3" style="background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Conference Overview</h2>
            <p id="conferenceOverviewSubtitle" class="text-muted fs-5">General information about the conference</p>
        </div>
        <div class="row g-4">
            <div class="col-lg-10 mx-auto">
                <div class="conference-overview-card">
                    <div class="conference-header">
                        <div class="conference-title-wrapper">
                            <h3 class="conference-title" id="conferenceName">Loading...</h3>
                            <div class="conference-accent-line"></div>
                                    </div>
                        <p class="conference-description" id="conferenceDescription">Loading...</p>
                                </div>
                    
                    <div class="conference-details-grid">
                        <div class="detail-item detail-item-time">
                            <div class="detail-icon-wrapper">
                                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                                    <path d="M16 2v4M8 2v4M3 10h18" stroke="currentColor" stroke-width="2"/>
                                    <circle cx="12" cy="15" r="1" fill="currentColor"/>
                                    <path d="M12 12v3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <div class="detail-content">
                                <div class="detail-label">Event Date</div>
                                <div class="detail-value" id="conferenceDateRange">Loading...</div>
                                    </div>
                                </div>
                        
                        <div class="detail-item detail-item-location">
                            <div class="detail-icon-wrapper">
                                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="2" fill="none"/>
                                    <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
                                </svg>
                            </div>
                            <div class="detail-content">
                                <div class="detail-label">Venue</div>
                                <div class="detail-value" id="conferenceLocationText">Loading...</div>
                        </div>
                            </div>
                        </div>
                    
                    <div class="conference-topics-section">
                        <div class="topics-header">
                            <svg class="topics-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            <h5 class="topics-title">Main Topics (Call for Papers)</h5>
                        </div>
                        <div id="conferenceTopics" class="topics-container">
                            <div class="topic-skeleton">
                                <div class="skeleton-badge"></div>
                                <div class="skeleton-badge"></div>
                                <div class="skeleton-badge"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Keynote Speakers Section -->
<section class="section position-relative" id="keynoteSpeakersSection" style="display: none;">
    <div class="container position-relative" style="z-index: 1;">
        <div class="section-title">
            <h2><i class="fas fa-microphone-alt me-2"></i>Keynote Speakers</h2>
            <p>Prominent speakers of the conference</p>
        </div>
        <div class="row g-4" id="keynoteSpeakersContainer">
            <!-- Keynote speakers will be loaded here via JavaScript -->
        </div>
    </div>
</section>

<!-- Conference Location Section - Moved to end of body -->

<!-- Timeline Section -->
<section class="section position-relative timeline-hero-section" id="timelineSection" style="display: none;">
    <!-- Background Image Layer -->
    <div class="timeline-background-image"></div>
    
    <!-- Animated Background Layers (similar to hero section) -->
    <div class="timeline-dark-overlay"></div>
    <div class="timeline-mesh-gradient"></div>
    <div class="timeline-gradient-overlay"></div>
    <div class="timeline-grid-overlay"></div>
    
    <!-- Light Streaks -->
    <div class="timeline-light-streaks">
        <div class="timeline-light-streak timeline-light-left"></div>
        <div class="timeline-light-streak timeline-light-right"></div>
    </div>
    
    <!-- Particle Effects -->
    <div class="timeline-particles">
        <div class="timeline-particle"></div>
        <div class="timeline-particle"></div>
        <div class="timeline-particle"></div>
        <div class="timeline-particle"></div>
        <div class="timeline-particle"></div>
        <div class="timeline-particle"></div>
        <div class="timeline-particle"></div>
        <div class="timeline-particle"></div>
    </div>
    
    <div class="container position-relative" style="z-index: 1;">
        <div class="section-title text-center mb-5">
            <h2 class="timeline-section-title">Conference Timeline</h2>
            <p class="timeline-section-subtitle">Important dates and milestones for the conference</p>
        </div>
        <div class="timeline-container">
            <div class="timeline-wrapper" id="timelineWrapper">
                <div class="timeline-line"></div>
                <!-- Timeline items will be loaded here via JavaScript -->
            </div>
        </div>
    </div>
</section>

<!-- Conference Highlights Section -->
<section class="section position-relative" style="background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);">
    <!-- Decorative background elements -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="overflow: hidden; pointer-events: none; z-index: 0;">
        <svg class="position-absolute" style="top: -10%; right: -5%; width: 400px; height: 400px; opacity: 0.03;" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <path d="M40.8,-57.2C52.2,-46.9,60.1,-32.6,63.5,-17.8C66.9,-3,65.8,12.3,60.9,26.1C56,39.9,47.3,52.2,36.1,60.3C24.9,68.4,11.1,72.3,-2.6,75.9C-16.3,79.5,-32.6,82.8,-45.3,77.2C-58,71.6,-67.1,57.1,-73.2,41.2C-79.3,25.3,-82.4,8,-79.4,-8.4C-76.4,-24.8,-67.3,-40.4,-55.2,-50.7C-43.1,-61,-28,-66,-13.5,-63.5C1,-61,2,-51,14.1,-42.6Z" transform="translate(100 100)" fill="#2563eb"/>
        </svg>
        <svg class="position-absolute" style="bottom: -10%; left: -5%; width: 300px; height: 300px; opacity: 0.03;" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <path d="M31.4,-41.5C42.8,-32.6,55.4,-26.9,63.1,-17.6C70.8,-8.3,73.6,4.6,70.1,16.2C66.6,27.8,56.8,38.1,45.6,45.3C34.4,52.5,21.8,56.6,8.9,59.8C-4,63,-17.2,65.3,-28.4,61.5C-39.6,57.7,-48.8,47.8,-55.5,36.1C-62.2,24.4,-66.4,10.9,-65.1,-2C-63.8,-14.9,-57,-27.2,-48.2,-36.8C-39.4,-46.4,-28.6,-53.3,-17.5,-58.8C-6.4,-64.3,5,-68.4,16.2,-67.2Z" transform="translate(100 100)" fill="#8b5cf6"/>
        </svg>
    </div>
    <div class="container position-relative" style="z-index: 1;">
        <div class="section-title text-center mb-5">
            <h2 style="background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                <i class="fas fa-star me-2"></i>Conference Highlights
            </h2>
            <p class="text-muted">Discover what makes this conference special</p>
        </div>
        
        <div class="row g-4 mb-5">
            <!-- Feature Cards -->
            <div class="col-lg-4 col-md-6">
                <div class="card h-100 border-0 shadow-sm hover-lift" style="transition: all 0.3s ease;">
                    <div class="card-body p-4 text-center">
                        <div class="mb-3">
                            <div class="d-inline-flex align-items-center justify-content-center rounded-circle" style="width: 80px; height: 80px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                                <i class="fas fa-users fa-2x text-white"></i>
                            </div>
                        </div>
                        <h5 class="card-title mb-3">Expert community</h5>
                        <p class="text-muted mb-0">Connect with leading researchers, academics, and industry professionals from around the world.</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6">
                <div class="card h-100 border-0 shadow-sm hover-lift" style="transition: all 0.3s ease;">
                    <div class="card-body p-4 text-center">
                        <div class="mb-3">
                            <div class="d-inline-flex align-items-center justify-content-center rounded-circle" style="width: 80px; height: 80px; background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                                <i class="fas fa-microscope fa-2x text-white"></i>
                            </div>
                        </div>
                        <h5 class="card-title mb-3">Cutting-edge research</h5>
                        <p class="text-muted mb-0">Present and discover the latest scientific breakthroughs and innovative research findings.</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6">
                <div class="card h-100 border-0 shadow-sm hover-lift" style="transition: all 0.3s ease;">
                    <div class="card-body p-4 text-center">
                        <div class="mb-3">
                            <div class="d-inline-flex align-items-center justify-content-center rounded-circle" style="width: 80px; height: 80px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                                <i class="fas fa-certificate fa-2x text-white"></i>
                            </div>
                        </div>
                        <h5 class="card-title mb-3">Peer review process</h5>
                        <p class="text-muted mb-0">Rigorous peer review ensures high-quality publications and academic excellence.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Conference Statistics -->
        <div class="row g-4">
            <div class="col-12">
                <div class="card border-0 shadow-lg conference-stats-card" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 50%, #1e40af 100%); border-radius: 20px; animation: fadeInUp 0.8s ease-out;">
                    <div class="card-body p-5">
                        <div class="row g-4 text-center text-white">
                            <div class="col-md-3 col-6 stat-item" style="animation: fadeInUp 0.8s ease-out 0.1s both;">
                                <div class="mb-2">
                                    <i class="fas fa-file-alt fa-3x mb-3 stat-icon" style="opacity: 0.95;"></i>
                                </div>
                                <h3 class="mb-1 fw-bold stat-number" id="statSubmissions">0</h3>
                                <p class="mb-0 opacity-90">Total submissions</p>
                            </div>
                            <div class="col-md-3 col-6 stat-item" style="animation: fadeInUp 0.8s ease-out 0.2s both;">
                                <div class="mb-2">
                                    <i class="fas fa-user-tie fa-3x mb-3 stat-icon" style="opacity: 0.95;"></i>
                                </div>
                                <h3 class="mb-1 fw-bold stat-number" id="statReviewers">0</h3>
                                <p class="mb-0 opacity-90">Active reviewers</p>
                            </div>
                            <div class="col-md-3 col-6 stat-item" style="animation: fadeInUp 0.8s ease-out 0.3s both;">
                                <div class="mb-2">
                                    <i class="fas fa-tags fa-3x mb-3 stat-icon" style="opacity: 0.95;"></i>
                                </div>
                                <h3 class="mb-1 fw-bold stat-number" id="statTopics">0</h3>
                                <p class="mb-0 opacity-90">Research topics</p>
                            </div>
                            <div class="col-md-3 col-6 stat-item" style="animation: fadeInUp 0.8s ease-out 0.4s both;">
                                <div class="mb-2">
                                    <i class="fas fa-check-circle fa-3x mb-3 stat-icon" style="opacity: 0.95;"></i>
                                </div>
                                <h3 class="mb-1 fw-bold stat-number" id="statAccepted">0</h3>
                                <p class="mb-0 opacity-90">Accepted papers</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quick Actions Section (Author/Reviewer Only) -->
@if (User.Identity?.IsAuthenticated == true && (User.IsInRole("Author") || User.IsInRole("Reviewer")))
{
<section class="section bg-light position-relative" style="background: linear-gradient(to bottom, #f9fafb 0%, #ffffff 100%);">
    <!-- Decorative pattern -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="background-image: url('data:image/svg+xml,%3Csvg width=&quot;60&quot; height=&quot;60&quot; viewBox=&quot;0 0 60 60&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;%3E%3Cg fill=&quot;none&quot; fill-rule=&quot;evenodd&quot;%3E%3Cg fill=&quot;%232563eb&quot; fill-opacity=&quot;0.02&quot;%3E%3Cpath d=&quot;M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z&quot;/%3E%3C/g%3E%3C/g%3E%3C/svg%3E'); opacity: 0.5; pointer-events: none;"></div>
    <div class="container position-relative" style="z-index: 1;">
        <div class="section-title">
            <h2>Quick Actions</h2>
            <p>Choose one of the actions below to get started</p>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 text-center">
                    <div class="card-body p-5 position-relative">
                        <!-- Decorative corner accent -->
                        <div class="position-absolute top-0 end-0" style="width: 80px; height: 80px; background: linear-gradient(135deg, rgba(37, 99, 235, 0.1) 0%, transparent 70%); border-radius: 0 var(--radius-lg) 0 var(--radius-xl);"></div>
                        <div class="mb-4 position-relative">
                            <div class="stat-card-icon bg-primary text-white mx-auto" style="box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);">
                                <i class="fas fa-plus-circle"></i>
                            </div>
                        </div>
                        <h4 class="card-title">Submit New Paper</h4>
                        <p class="card-text text-muted">
                            Submit your new research work to the conference. The system supports file upload and paper information management.
                        </p>
                        <a href="/Submission/Create" class="btn btn-primary">
                            <i class="fas fa-arrow-right me-2"></i>Get Started
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 text-center">
                    <div class="card-body p-5 position-relative">
                        <!-- Decorative corner accent -->
                        <div class="position-absolute top-0 end-0" style="width: 80px; height: 80px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, transparent 70%); border-radius: 0 var(--radius-lg) 0 var(--radius-xl);"></div>
                        <div class="mb-4 position-relative">
                            <div class="stat-card-icon mx-auto" style="background: linear-gradient(135deg, #10b981 0%, #34d399 100%); box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);">
                                <i class="fas fa-clipboard-list text-white"></i>
                            </div>
                        </div>
                        <h4 class="card-title">View My Submissions</h4>
                        <p class="card-text text-muted">
                            Track the status of your submitted papers, view feedback from the editorial board, and make edits when needed.
                        </p>
                        <a href="/Submission/Index" class="btn btn-secondary">
                            <i class="fas fa-arrow-right me-2"></i>View List
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 text-center">
                    <div class="card-body p-5 position-relative">
                        <!-- Decorative corner accent -->
                        <div class="position-absolute top-0 end-0" style="width: 80px; height: 80px; background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, transparent 70%); border-radius: 0 var(--radius-lg) 0 var(--radius-xl);"></div>
                        <div class="mb-4 position-relative">
                            <div class="stat-card-icon mx-auto" style="background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%); box-shadow: 0 8px 20px rgba(245, 158, 11, 0.3);">
                                <i class="fas fa-star text-white"></i>
                            </div>
                        </div>
                        <h4 class="card-title">Reviews</h4>
                        <p class="card-text text-muted">
                            If you are a reviewer, access to view assigned papers and perform evaluations.
                        </p>
                        <a href="/Review/Index" class="btn" style="background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%); color: white; border: none;">
                            <i class="fas fa-arrow-right me-2"></i>View Assignments
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
}

<!-- Call to Action Section -->
<section class="section position-relative bg-light">
    <div class="container position-relative" style="z-index: 1;">
        <div class="row align-items-center">
            <div class="col-lg-8 mx-auto text-center">
                <div class="card border-0 shadow-lg p-5" style="background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border-radius: 20px;">
                    <h2 class="mb-3" style="background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                        <i class="fas fa-rocket me-2"></i>Ready to Submit Your Research?
                    </h2>
                    <p class="text-muted mb-4 fs-5">Join our community of researchers and contribute to advancing scientific knowledge.</p>
                    <div class="d-flex justify-content-center gap-3 flex-wrap">
                        @if (User.Identity?.IsAuthenticated == true)
                        {
                            <a href="/Submission/Create" class="btn btn-primary btn-lg px-4 py-3 shadow">
                                <i class="fas fa-file-upload me-2"></i>Submit Your Paper
                            </a>
                            <a href="/Submission/Index" class="btn btn-outline-primary btn-lg px-4 py-3">
                                <i class="fas fa-list me-2"></i>View My Submissions
                            </a>
                        }
                        else
                        {
                            <a href="/Account/Register" class="btn btn-primary btn-lg px-4 py-3 shadow">
                                <i class="fas fa-user-plus me-2"></i>Create Account
                            </a>
                            <a href="/Account/Login" class="btn btn-outline-primary btn-lg px-4 py-3">
                                <i class="fas fa-sign-in-alt me-2"></i>Sign In
                            </a>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Conference Location Section - At the end of body -->
<section class="section position-relative" id="conferenceLocationSection" style="display: none; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 80px 0;">
    <!-- Decorative background elements -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="overflow: hidden; pointer-events: none; z-index: 0; opacity: 0.1;">
        <svg class="position-absolute" style="top: -10%; right: -5%; width: 400px; height: 400px;" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <path d="M40.8,-57.2C52.2,-46.9,60.1,-32.6,63.5,-17.8C66.9,-3,65.8,12.3,60.9,26.1C56,39.9,47.3,52.2,36.1,60.3C24.9,68.4,11.1,72.3,-2.6,75.9C-16.3,79.5,-32.6,82.8,-45.3,77.2C-58,71.6,-67.1,57.1,-73.2,41.2C-79.3,25.3,-82.4,8,-79.4,-8.4C-76.4,-24.8,-67.3,-40.4,-55.2,-50.7C-43.1,-61,-28,-66,-13.5,-63.5C1,-61,2,-51,14.1,-42.6Z" transform="translate(100 100)" fill="#ffffff"/>
        </svg>
    </div>
    
    <div class="container position-relative" style="z-index: 1;">
        <div class="text-center mb-5">
            <h2 id="locationTitle" class="text-white mb-3" style="font-size: 2.5rem; font-weight: 700; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                <i class="fas fa-map-marker-alt me-3"></i>Conference Location
            </h2>
            <p id="locationSubtitle" class="text-white-50" style="font-size: 1.1rem;">Detailed information about the venue</p>
        </div>
        
        <div class="row g-4">
            <!-- Location Info Card -->
            <div class="col-lg-5">
                <div class="location-info-card">
                    <div class="location-card-header">
                        <div class="location-venue-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 21h18M5 21V7l8-4v18M19 21V11l-6-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M9 9v0M9 12v0M9 15v0M9 18v0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            </div>
                        <div class="location-venue-info">
                            <h3 class="location-venue-name" id="locationName">Loading...</h3>
                            <span class="location-venue-label">Conference Venue</span>
                            </div>
                        </div>
                        
                    <div class="location-details">
                        <div class="location-detail-item">
                            <div class="location-detail-icon location-icon-address">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="2" fill="none"/>
                                    <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
                                </svg>
                                </div>
                            <div class="location-detail-content">
                                <div class="location-detail-label">Address</div>
                                <div class="location-detail-value" id="locationAddress">Loading...</div>
                            </div>
                        </div>
                        
                        <div class="location-detail-item">
                            <div class="location-detail-icon location-icon-city">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3 21h18M5 21V7l8-4v18M19 21V11l-6-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M9 9v0M9 12v0M9 15v0M9 18v0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                </div>
                            <div class="location-detail-content">
                                <div class="location-detail-label">City / Country</div>
                                <div class="location-detail-value" id="locationCityCountry">Loading...</div>
                                </div>
                            </div>
                        </div>
                        
                    <div class="location-description-section">
                        <div class="location-description-header">
                            <svg class="location-description-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                                <path d="M12 16v-4M12 8h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            <span class="location-description-label">Description</span>
                        </div>
                        <div class="location-description-text" id="locationDescription">
                            <p>Loading...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Map Card -->
            <div class="col-lg-7">
                <div class="card shadow-lg h-100 border-0" style="border-radius: 20px; overflow: hidden;">
                    <div class="card-body p-0 position-relative">
                        <div id="googleMapContainer" style="width: 100%; height: 500px; position: relative;">
                            <!-- OpenStreetMap will be loaded here via Leaflet.js -->
                            <div id="googleMapPlaceholder" class="d-flex align-items-center justify-content-center h-100" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); z-index: 10;">
                                <div class="text-center text-white">
                                    <div class="spinner-border text-white mb-3" role="status" style="width: 3rem; height: 3rem;">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                    <h5 class="mb-2">Loading map...</h5>
                                    <p class="mb-0 text-white-50">Using OpenStreetMap (Free)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <!-- OpenStreetMap with Leaflet.js (Free, no API key needed) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Helper function to convert hex to rgba
        function hexToRgba(hex, alpha) {
            if (!hex || !hex.startsWith('#')) return `rgba(59, 130, 246, ${alpha})`;
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }
        
        // Load interface settings and update page
        let conferenceDateObj = new Date('2025-04-18T08:00:00');
        
        async function loadInterfaceSettings() {
            try {
                const response = await fetch('/Home/GetInterfaceSettings');
                if (response.ok) {
                    const data = await response.json();
                    
                    // Update hero section
                    if (data.heroTitle) {
                        const titleEl = document.querySelector('.hero-title');
                        if (titleEl) titleEl.innerHTML = '<i class="fas fa-graduation-cap me-3"></i>' + data.heroTitle;
                    }
                    if (data.heroSubtitle) {
                        const subtitleEl = document.querySelector('.hero-subtitle');
                        if (subtitleEl) subtitleEl.textContent = data.heroSubtitle;
                    }
                    if (data.conferenceDate) {
                        conferenceDateObj = new Date(data.conferenceDate);
                        const dateEl = document.getElementById('conferenceDate');
                        if (dateEl) dateEl.textContent = conferenceDateObj.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                    }
                    if (data.conferenceLocation) {
                        const locationEl = document.getElementById('conferenceLocation');
                        if (locationEl) locationEl.textContent = data.conferenceLocation;
                    }
                    
                    // Update background image/color - Background can be changed by admin
                    const heroSection = document.querySelector('.hero-section');
                    if (heroSection) {
                        // If background image is provided, use it with dark overlay (DEFI style)
                        if (data.heroBackgroundImage && data.heroBackgroundImage.trim() !== '') {
                            // Set ONLY background image - no gradient overlay here
                            heroSection.style.setProperty('background-image', `url("${data.heroBackgroundImage}")`, 'important');
                            heroSection.style.setProperty('background-size', 'cover', 'important');
                            heroSection.style.setProperty('background-position', 'center center', 'important');
                            heroSection.style.setProperty('background-repeat', 'no-repeat', 'important');
                            heroSection.style.setProperty('background-color', '#0a0e27', 'important');
                            
                            // Dark overlay is already in HTML, just ensure it's visible
                            const darkOverlay = document.getElementById('heroDarkOverlay');
                            if (darkOverlay) {
                                darkOverlay.style.display = 'block';
                            }
                            
                            console.log('Background image applied:', data.heroBackgroundImage);
                        } else if (data.heroBackgroundColor) {
                            // If only color is provided, use that color as base
                            heroSection.style.setProperty('background-color', data.heroBackgroundColor, 'important');
                            heroSection.style.setProperty('background-image', 'none', 'important');
                            // Hide dark overlay if no background image
                            const darkOverlay = document.getElementById('heroDarkOverlay');
                            if (darkOverlay) {
                                darkOverlay.style.display = 'none';
                            }
                        } else {
                            // No background image or color - hide dark overlay
                            const darkOverlay = document.getElementById('heroDarkOverlay');
                            if (darkOverlay) {
                                darkOverlay.style.display = 'none';
                            }
                        }
                    }
                    
                    // Apply animation settings
                    const particlesEl = document.getElementById('heroParticles');
                    const lightStreaksEl = document.getElementById('heroLightStreaks');
                    const gradientOverlayEl = document.getElementById('heroGradientOverlay');
                    const meshGradientEl = document.getElementById('heroMeshGradient');
                    
                    if (data.enableAnimations === false) {
                        if (particlesEl) particlesEl.style.display = 'none';
                        if (lightStreaksEl) lightStreaksEl.style.display = 'none';
                        if (gradientOverlayEl) gradientOverlayEl.style.animation = 'none';
                    } else {
                        // Apply animation speed
                        if (data.animationSpeed) {
                            heroSection.classList.remove('animation-slow', 'animation-normal', 'animation-fast');
                            heroSection.classList.add(`animation-${data.animationSpeed}`);
                        }
                        
                        // Apply particle settings
                        if (particlesEl) {
                            if (data.enableParticles === false) {
                                particlesEl.style.display = 'none';
                            } else {
                                particlesEl.style.display = 'block';
                                particlesEl.className = 'hero-particles';
                                if (data.particleDensity) {
                                    particlesEl.classList.add(`particles-${data.particleDensity}`);
                                }
                            }
                        }
                        
                        // Apply light streak settings
                        if (lightStreaksEl) {
                            if (data.enableLightStreaks === false) {
                                lightStreaksEl.style.display = 'none';
                            } else {
                                lightStreaksEl.style.display = 'block';
                                lightStreaksEl.className = 'hero-light-streaks';
                                if (data.lightIntensity) {
                                    lightStreaksEl.classList.add(`lights-${data.lightIntensity}`);
                                }
                            }
                        }
                        
                        // Apply gradient color - single color for overlay
                        if (data.gradientColor) {
                            const gradientColor = hexToRgba(data.gradientColor, 0.6);
                            
                            // Mesh gradient - subtle corner gradients using single color
                            if (meshGradientEl) {
                                meshGradientEl.style.background = `
                                    radial-gradient(at 0% 0%, ${gradientColor} 0%, transparent 40%),
                                    radial-gradient(at 100% 0%, ${gradientColor} 0%, transparent 40%),
                                    radial-gradient(at 0% 100%, ${gradientColor} 0%, transparent 50%),
                                    radial-gradient(at 100% 100%, ${gradientColor} 0%, transparent 50%)
                                `;
                            }
                            
                            // Gradient overlay - DEFI style: diagonal bright shapes at top corners using single color
                            if (gradientOverlayEl) {
                                // Create diagonal gradient shapes at top-left and top-right corners with same color
                                gradientOverlayEl.style.background = `
                                    linear-gradient(135deg, ${gradientColor} 0%, ${gradientColor} 25%, transparent 60%),
                                    linear-gradient(225deg, ${gradientColor} 0%, ${gradientColor} 25%, transparent 60%)
                                `;
                                gradientOverlayEl.style.backgroundSize = '50% 50%, 50% 50%';
                                gradientOverlayEl.style.backgroundPosition = 'top left, top right';
                                gradientOverlayEl.style.backgroundRepeat = 'no-repeat';
                                gradientOverlayEl.style.opacity = '0.85';
                            }
                            
                            // Update light streak colors (2 components at 2 sides) using single color
                            if (lightStreaksEl && lightStreaksEl.style.display !== 'none') {
                                const leftStreak = lightStreaksEl.querySelector('.light-streak-left');
                                const rightStreak = lightStreaksEl.querySelector('.light-streak-right');
                                
                                // Create a slightly lighter/darker variant for variation
                                const lighterColor = hexToRgba(data.gradientColor, 0.7);
                                const darkerColor = hexToRgba(data.gradientColor, 0.4);
                                
                                if (leftStreak) {
                                    leftStreak.style.background = `radial-gradient(
                                        circle,
                                        ${lighterColor} 0%,
                                        ${gradientColor} 30%,
                                        ${darkerColor} 50%,
                                        transparent 80%
                                    )`;
                                }
                                
                                if (rightStreak) {
                                    rightStreak.style.background = `radial-gradient(
                                        circle,
                                        ${lighterColor} 0%,
                                        ${gradientColor} 30%,
                                        ${darkerColor} 50%,
                                        transparent 80%
                                    )`;
                                }
                            }
                        }
                    }
                    
                    // Update statistics
                    if (data.statistics) {
                        if (data.statistics.submissions !== undefined) {
                            const el = document.getElementById('statSubmissions');
                            if (el) el.textContent = data.statistics.submissions;
                        }
                        if (data.statistics.accepted !== undefined) {
                            const el = document.getElementById('statAccepted');
                            if (el) el.textContent = data.statistics.accepted;
                        }
                        // Load additional statistics
                        loadConferenceStatistics(data);
                    }
                    
                    // Render timeline
                    renderTimeline(data.timeline || []);
                    
                    // Render conference overview
                    renderConferenceOverview(data);
                    
                    // Render keynote speakers
                    renderKeynoteSpeakers(data.keynoteSpeakers || []);
                    
                    // Render location
                    renderConferenceLocation(data.location);
                }
            } catch (error) {
                console.error('Error loading interface settings:', error);
            }
        }
        
        // Render Conference Overview
        function renderConferenceOverview(data) {
            const overviewSection = document.getElementById('conferenceOverviewSection');
            if (!overviewSection) return;
            
            if (data.conferenceName) {
                const nameEl = document.getElementById('conferenceName');
                if (nameEl) nameEl.textContent = data.conferenceName;
            }
            
            if (data.conferenceDescription) {
                const descEl = document.getElementById('conferenceDescription');
                if (descEl) descEl.textContent = data.conferenceDescription;
            }
            
            // Date range - Format in English
            if (data.conferenceStartDate || data.conferenceEndDate) {
                const dateRangeEl = document.getElementById('conferenceDateRange');
                if (dateRangeEl) {
                    let dateText = '';
                    if (data.conferenceStartDate) {
                        const startDate = new Date(data.conferenceStartDate);
                        dateText = startDate.toLocaleDateString('en-US', { 
                            year: 'numeric', 
                            month: 'long', 
                            day: 'numeric' 
                        });
                    }
                    if (data.conferenceEndDate) {
                        const endDate = new Date(data.conferenceEndDate);
                        const endText = endDate.toLocaleDateString('en-US', { 
                            year: 'numeric', 
                            month: 'long', 
                            day: 'numeric' 
                        });
                        if (dateText) {
                            dateText += ' - ' + endText;
                        } else {
                            dateText = endText;
                        }
                    }
                    dateRangeEl.textContent = dateText || 'To be announced';
                }
            }
            
            // Location
            if (data.conferenceLocation) {
                const locationEl = document.getElementById('conferenceLocationText');
                if (locationEl) locationEl.textContent = data.conferenceLocation;
            }
            
            // Topics - Load and render topics
            const topicsContainer = document.getElementById('conferenceTopics');
            if (topicsContainer) {
                if (data.topics && data.topics.length > 0) {
                    topicsContainer.innerHTML = data.topics.map(topic => 
                        `<span class="badge bg-primary">${escapeHtml(topic.name || topic)}</span>`
                    ).join('');
                } else {
                    // Try to load topics from API
                    fetch('/Home/GetTopics')
                        .then(response => response.json())
                        .then(topics => {
                            if (topics && topics.length > 0) {
                                topicsContainer.innerHTML = topics.map(topic => 
                                    `<span class="badge bg-primary">${escapeHtml(topic.name || topic)}</span>`
                                ).join('');
                            } else {
                                topicsContainer.innerHTML = '<span class="text-muted">No topics available</span>';
                            }
                        })
                        .catch(error => {
                            console.error('Error loading topics:', error);
                            topicsContainer.innerHTML = '<span class="text-muted">Topics coming soon</span>';
                        });
                }
            }
        }
        
        // Render Keynote Speakers
        function renderKeynoteSpeakers(speakers) {
            const speakersSection = document.getElementById('keynoteSpeakersSection');
            const speakersContainer = document.getElementById('keynoteSpeakersContainer');
            
            if (!speakersSection || !speakersContainer) return;
            
            if (!speakers || speakers.length === 0) {
                speakersSection.style.display = 'none';
                return;
            }
            
            speakersSection.style.display = 'block';
            speakersContainer.innerHTML = '';
            
            speakers.forEach((speaker, index) => {
                const col = document.createElement('div');
                col.className = 'col-md-6 col-lg-4';
                
                const photoHtml = speaker.photoUrl ? 
                    `<img src="${escapeHtml(speaker.photoUrl)}" alt="${escapeHtml(speaker.name)}" class="card-img-top" style="height: 250px; object-fit: cover;">` :
                    `<div class="card-img-top bg-primary d-flex align-items-center justify-content-center" style="height: 250px;">
                        <i class="fas fa-user fa-5x text-white"></i>
                    </div>`;
                
                col.innerHTML = `
                    <div class="card h-100 shadow-sm">
                        ${photoHtml}
                        <div class="card-body">
                            <h5 class="card-title">${escapeHtml(speaker.name || '')}</h5>
                            ${speaker.title ? `<p class="text-muted mb-2"><small>${escapeHtml(speaker.title)}</small></p>` : ''}
                            ${speaker.affiliation ? `<p class="text-muted mb-2"><i class="fas fa-building me-1"></i>${escapeHtml(speaker.affiliation)}</p>` : ''}
                            ${speaker.topic ? `<div class="mt-3">
                                <strong>Topic:</strong>
                                <p class="mb-0">${escapeHtml(speaker.topic)}</p>
                            </div>` : ''}
                            ${speaker.biography ? `<p class="card-text mt-3"><small class="text-muted">${escapeHtml(speaker.biography)}</small></p>` : ''}
                        </div>
                    </div>
                `;
                
                speakersContainer.appendChild(col);
            });
        }
        
        // OpenStreetMap with Leaflet instance (Free, no API key needed)
        let leafletMap = null;
        let leafletMarker = null;

        // Initialize Google Map (called by Google Maps API callback)
        function initGoogleMap() {
            // This function is called when Google Maps API is loaded
            console.log('Google Maps API loaded');
        }

        // Render Conference Location
        function renderConferenceLocation(location) {
            console.log('Rendering conference location:', location);
            
            const locationSection = document.getElementById('conferenceLocationSection');
            if (!locationSection) {
                console.warn('Location section not found');
                return;
            }
            
            if (!location) {
                locationSection.style.display = 'none';
                return;
            }
            
            locationSection.style.display = 'block';
            
            // Update location info
            const nameEl = document.getElementById('locationName');
            if (nameEl && location.name) nameEl.textContent = location.name;
            
            const addressEl = document.getElementById('locationAddress');
            if (addressEl && location.address) addressEl.textContent = location.address;
            
            const cityCountryEl = document.getElementById('locationCityCountry');
            if (cityCountryEl) {
                let cityCountry = '';
                if (location.city) cityCountry += location.city;
                if (location.country) {
                    if (cityCountry) cityCountry += ', ';
                    cityCountry += location.country;
                }
                cityCountryEl.textContent = cityCountry || 'Not updated';
            }
            
            const descEl = document.getElementById('locationDescription');
            if (descEl && location.description) {
                descEl.innerHTML = `<p>${escapeHtml(location.description)}</p>`;
            } else if (descEl) {
                descEl.innerHTML = '<p class="text-muted">No description available.</p>';
            }
            
            // Render OpenStreetMap using Leaflet.js (Free, no API key needed)
            const mapContainer = document.getElementById('googleMapContainer');
            const mapPlaceholder = document.getElementById('googleMapPlaceholder');
            
            if (!mapContainer) {
                console.error('Map container not found');
                return;
            }
            
            // Wait for Leaflet to load
            if (typeof L === 'undefined') {
                console.warn('Leaflet not loaded yet, retrying...');
                setTimeout(() => renderConferenceLocation(location), 500);
                return;
            }

            // Clear existing map
            if (leafletMap) {
                leafletMap.remove();
                leafletMap = null;
                leafletMarker = null;
            }
            
            // Remove existing map div if any
            const existingMapDiv = document.getElementById('openStreetMapDiv');
            if (existingMapDiv) {
                existingMapDiv.remove();
            }
            
            let mapCenter;
            let mapAddress = location.address || '';
            if (location.city) mapAddress += (mapAddress ? ', ' : '') + location.city;
            if (location.country) mapAddress += (mapAddress ? ', ' : '') + location.country;

            // Determine map center
            console.log('Location coordinates:', location.latitude, location.longitude);
            
            if (location.latitude && location.longitude) {
                // Use coordinates from database (from OpenStreetMap geocoding)
                const lat = parseFloat(location.latitude);
                const lng = parseFloat(location.longitude);
                
                if (isNaN(lat) || isNaN(lng)) {
                    console.error('Invalid coordinates:', location.latitude, location.longitude);
                    if (mapPlaceholder) {
                        mapPlaceholder.style.display = 'flex';
                        mapPlaceholder.style.zIndex = '10';
                        mapPlaceholder.innerHTML = `
                            <div class="text-center text-white p-4">
                                <i class="fas fa-exclamation-triangle fa-3x mb-3"></i>
                                <h5 class="mb-2">Invalid Coordinates</h5>
                                <p class="mb-2">Please update the address in Admin.</p>
                            </div>
                        `;
                    }
                    return;
                }
                
                // Hide placeholder immediately (before creating map)
                if (mapPlaceholder) {
                    mapPlaceholder.style.display = 'none';
                    mapPlaceholder.style.zIndex = '0';
                    mapPlaceholder.style.visibility = 'hidden';
                }
                
                // Create map element
                const mapDiv = document.createElement('div');
                mapDiv.id = 'openStreetMapDiv';
                mapDiv.style.width = '100%';
                mapDiv.style.height = '500px';
                mapDiv.style.borderRadius = '20px';
                mapDiv.style.zIndex = '20';
                mapDiv.style.position = 'relative';
                mapDiv.style.backgroundColor = '#f0f0f0';
                mapContainer.appendChild(mapDiv);
                
                mapCenter = [lat, lng];
                console.log('Initializing map with coordinates:', mapCenter);
                initializeOpenStreetMap(mapCenter, location.name || mapAddress, mapPlaceholder);
            } else if (mapAddress) {
                // If no coordinates, show message to add address in admin
                if (mapPlaceholder) {
                    mapPlaceholder.style.display = 'flex';
                    mapPlaceholder.style.zIndex = '10';
                    mapPlaceholder.innerHTML = `
                        <div class="text-center text-white p-4">
                            <i class="fas fa-exclamation-triangle fa-3x mb-3"></i>
                            <h5 class="mb-2">No Coordinates Available</h5>
                            <p class="mb-2">Please add an address in Admin to automatically get coordinates.</p>
                            <small class="text-white-50 d-block">Address: ${escapeHtml(mapAddress)}</small>
                        </div>
                    `;
                }
                return;
            } else {
                // Default to Ho Chi Minh City
                if (mapPlaceholder) {
                    mapPlaceholder.style.display = 'none';
                    mapPlaceholder.style.zIndex = '0';
                }
                
                const mapDiv = document.createElement('div');
                mapDiv.id = 'openStreetMapDiv';
                mapDiv.style.width = '100%';
                mapDiv.style.height = '500px';
                mapDiv.style.borderRadius = '20px';
                mapDiv.style.zIndex = '2';
                mapDiv.style.position = 'relative';
                mapContainer.appendChild(mapDiv);
                
                mapCenter = [10.8231, 106.6297];
                initializeOpenStreetMap(mapCenter, location.name || mapAddress, mapPlaceholder);
            }
        }

        function initializeOpenStreetMap(center, title, mapPlaceholder) {
            const mapDiv = document.getElementById('openStreetMapDiv');
            if (!mapDiv) {
                console.error('Map div not found');
                if (mapPlaceholder) {
                    mapPlaceholder.style.display = 'flex';
                    mapPlaceholder.style.zIndex = '10';
                }
                return;
            }
            
            if (typeof L === 'undefined') {
                console.error('Leaflet library not loaded');
                if (mapPlaceholder) {
                    mapPlaceholder.style.display = 'flex';
                    mapPlaceholder.style.zIndex = '10';
                }
                return;
            }

            console.log('Initializing OpenStreetMap at:', center);
            
            try {
                // Ensure map div is visible
                mapDiv.style.display = 'block';
                mapDiv.style.zIndex = '2';
                
                // Initialize Leaflet map
                leafletMap = L.map(mapDiv, {
                    zoomControl: true,
                    attributionControl: true
                }).setView(center, 15);

                // Add OpenStreetMap tile layer
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    maxZoom: 19
                }).addTo(leafletMap);

                // Add marker with custom red icon
                const customIcon = L.icon({
                    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
                    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',
                    iconSize: [25, 41],
                    iconAnchor: [12, 41],
                    popupAnchor: [1, -34],
                    shadowSize: [41, 41]
                });

                leafletMarker = L.marker(center, { icon: customIcon })
                    .addTo(leafletMap)
                    .bindPopup(`<strong>${escapeHtml(title || 'Conference Location')}</strong>`)
                    .openPopup();
                
                // Ensure placeholder is completely hidden
                if (mapPlaceholder) {
                    mapPlaceholder.style.display = 'none';
                    mapPlaceholder.style.visibility = 'hidden';
                    mapPlaceholder.style.zIndex = '0';
                    mapPlaceholder.style.opacity = '0';
                }
                
                // Ensure map div is visible
                if (mapDiv) {
                    mapDiv.style.display = 'block';
                    mapDiv.style.visibility = 'visible';
                    mapDiv.style.zIndex = '20';
                }
                
                // Force map to invalidate size (fixes rendering issues)
                setTimeout(() => {
                    if (leafletMap) {
                        leafletMap.invalidateSize();
                        console.log('Map size invalidated');
                    }
                    // Double check placeholder is hidden
                    if (mapPlaceholder) {
                        mapPlaceholder.style.display = 'none';
                        mapPlaceholder.style.visibility = 'hidden';
                    }
                }, 100);
                
                console.log('OpenStreetMap initialized successfully');
            } catch (error) {
                console.error('Error initializing OpenStreetMap:', error);
                if (mapPlaceholder) {
                    mapPlaceholder.style.display = 'flex';
                    mapPlaceholder.style.zIndex = '10';
                    mapPlaceholder.innerHTML = `
                        <div class="text-center text-white p-4">
                            <i class="fas fa-exclamation-triangle fa-3x mb-3"></i>
                            <h5 class="mb-2">Error Loading Map</h5>
                            <p class="mb-2">Please try again later.</p>
                            <small class="text-white-50">${escapeHtml(error.message || 'Unknown error')}</small>
                        </div>
                    `;
                }
            }
        }
        
        // Render timeline items
        function renderTimeline(timelineItems) {
            const timelineWrapper = document.getElementById('timelineWrapper');
            const timelineSection = document.getElementById('timelineSection');
            
            if (!timelineWrapper || !timelineSection) return;
            
            // Clear existing items (except timeline line)
            const existingItems = timelineWrapper.querySelectorAll('.timeline-item');
            existingItems.forEach(item => item.remove());
            
            if (!timelineItems || timelineItems.length === 0) {
                timelineSection.style.display = 'none';
                return;
            }
            
            // Show timeline section
            timelineSection.style.display = 'block';
            
            // Render each timeline item
            timelineItems.forEach((item, index) => {
                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';
                
                // Format date
                let dateHtml = '';
                if (item.date) {
                    try {
                        const date = new Date(item.date);
                        const formattedDate = date.toLocaleDateString('en-US', { 
                            day: 'numeric', 
                            month: 'long', 
                            year: 'numeric' 
                        });
                        dateHtml = `
                            <div class="timeline-date">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                                    <path d="M16 2v4M8 2v4M3 10h18" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                ${formattedDate}
                            </div>
                        `;
                    } catch (e) {
                        console.error('Error formatting date:', e);
                    }
                }
                
                // Build content HTML
                const descriptionHtml = item.description ? 
                    `<p class="timeline-description">${escapeHtml(item.description)}</p>` : '';
                
                // Custom SVG icon based on item type or default
                let iconSvg = '';
                if (item.icon && item.icon.includes('svg')) {
                    iconSvg = item.icon;
                } else {
                    // Default timeline icon - clock/calendar
                    iconSvg = `
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                            <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    `;
                }
                
                timelineItem.innerHTML = `
                    <div class="timeline-icon" style="background: linear-gradient(135deg, ${item.color || '#3b82f6'} 0%, ${item.color || '#2563eb'} 100%);">
                        ${iconSvg}
                    </div>
                    <div class="timeline-item-content">
                        ${dateHtml}
                        <h4 class="timeline-title">${escapeHtml(item.title || '')}</h4>
                        ${descriptionHtml}
                    </div>
                `;
                
                timelineWrapper.appendChild(timelineItem);
            });
        }
        
        // Helper function to escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // Helper function to convert hex to rgba
        function hexToRgba(hex, alpha) {
            if (!hex || !hex.startsWith('#')) return `rgba(59, 130, 246, ${alpha})`;
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }

        // Countdown Timer
        function updateCountdown() {
            const now = new Date();
            const diff = conferenceDateObj - now;

            if (diff <= 0) {
                document.getElementById('countdownDays').textContent = '0';
                document.getElementById('countdownHours').textContent = '0';
                document.getElementById('countdownMinutes').textContent = '0';
                document.getElementById('countdownSeconds').textContent = '0';
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('countdownDays').textContent = days.toString().padStart(2, '0');
            document.getElementById('countdownHours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('countdownMinutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('countdownSeconds').textContent = seconds.toString().padStart(2, '0');
        }

        // Load settings on page load
        loadInterfaceSettings();
        
        // Update countdown every second
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // Load Conference Statistics
        async function loadConferenceStatistics(data) {
            try {
                // Load reviewers count
                const reviewersEl = document.getElementById('statReviewers');
                if (reviewersEl) {
                    try {
                        const response = await fetch('/Home/GetStatistics');
                        if (response.ok) {
                            const stats = await response.json();
                            if (stats.reviewers !== undefined) {
                                reviewersEl.textContent = stats.reviewers;
                            }
                            if (stats.topics !== undefined) {
                                const topicsEl = document.getElementById('statTopics');
                                if (topicsEl) topicsEl.textContent = stats.topics;
                            }
                        }
                    } catch (error) {
                        console.error('Error loading statistics:', error);
                        if (reviewersEl) reviewersEl.textContent = '0';
                        const topicsEl = document.getElementById('statTopics');
                        if (topicsEl) topicsEl.textContent = '0';
                    }
                }
            } catch (error) {
                console.error('Error in loadConferenceStatistics:', error);
            }
        }

        // Enhanced animations on scroll
        document.addEventListener('DOMContentLoaded', function() {
            // Intersection Observer for fade-in animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver(function(entries) {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.classList.add('visible');
                        }, index * 100); // Stagger animation
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);
            
            // Add fade-in-on-scroll class to elements
            document.querySelectorAll('.stat-card, .card:not(.hero-section .card)').forEach((el, index) => {
                el.classList.add('fade-in-on-scroll');
                observer.observe(el);
            });
            
            // Smooth scroll for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href !== '#' && href.length > 1) {
                        e.preventDefault();
                        const target = document.querySelector(href);
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    }
                });
            });
            
            // Add loading state to buttons
            document.querySelectorAll('form').forEach(form => {
                form.addEventListener('submit', function(e) {
                    const submitBtn = form.querySelector('button[type="submit"]');
                    if (submitBtn) {
                        submitBtn.classList.add('btn-loading');
                    }
                });
            });
        });
        
        // Add hover effects with animation
        document.querySelectorAll('.btn, .card, .stat-card').forEach(el => {
            el.addEventListener('mouseenter', function() {
                this.style.transition = 'all 0.3s ease';
            });
        });

        // Check authentication before allowing access to main features
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is authenticated (check for authentication cookie or session)
            const isAuthenticated = @(User.Identity?.IsAuthenticated == true ? "true" : "false");
            
            // List of protected action links
            const protectedLinks = [
                '/Submission/Create',
                '/Submission/Index',
                '/Review/Index'
            ];

            // Function to check and handle protected links
            function handleProtectedLink(event, href) {
                if (!isAuthenticated) {
                    event.preventDefault();
                    // Redirect directly to login page
                    window.location.href = '/Account/Login?returnUrl=' + encodeURIComponent(href);
                    return false;
                }
                return true;
            }

            // Attach click handlers to all links that match protected paths
            document.querySelectorAll('a[href]').forEach(link => {
                const href = link.getAttribute('href');
                if (href && protectedLinks.some(path => href.includes(path))) {
                    link.addEventListener('click', function(e) {
                        handleProtectedLink(e, href);
                    });
                }
            });

            // Also handle buttons that might navigate
            document.querySelectorAll('a.btn[href]').forEach(btn => {
                const href = btn.getAttribute('href');
                if (href && protectedLinks.some(path => href.includes(path))) {
                    btn.addEventListener('click', function(e) {
                        handleProtectedLink(e, href);
                    });
                }
            });
        });
    </script>
}
